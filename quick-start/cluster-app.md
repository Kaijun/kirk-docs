# 2.2 实现服务在集群内/集群外的访问

进入添加服务页面后，可以在网络配置一节添加端口配置，使你的服务可以在集群内/集群外访问

![](_figures/quick-start/cluster-app-netconfig.png)

***
## 2.2.1 集群内
1）填写你的后端服务监听端口

2）选择协议

3）如果服务只需集群内访问无需添加负载均衡，可以忽略

?> 服务创建后会自动添加 DNS 记录，项目内其他容器可以通过 **<应用名>-<服务名>:<端口号>** 在集群内访问服务

![](_figures/quick-start/cluster-app-inside.png)
***
## 2.2.2 集群外
通过为服务绑定负载均衡，能够使你的服务可以在集群外访问，平台支持HTTP/HTTPS七层和TCP四层两种负载均衡。
### HTTP/HTTPS七层负载均衡
七层负载均衡有两种方式配置到服务上：    
第一种是服务创建时添加七层负载均衡到服务    
第二种是在负载均衡页面创建七层负载均衡，再选择挂载的服务    
这里以第一种为例，第二种[详见3.10](user-guide/load-balance.md)    
通过点击下图中 **1** 标签处，打开负载均衡快速创建页

![](_figures/quick-start/cluster-app-outside-1.png)

在创建页中填入需要的信息：

1）**负载均衡名称：**长度为2-64的小写字母、数字或"-", 不能以"-"开头或结尾

2）**描述：**负载均衡的文本描述

3）**计费方式：**负载均衡的计费方式，当前仅支持按流量计费

4）**域名：**为负载均衡绑定自定义域名，[详见3.9](user-guide/domain.md)

![](_figures/quick-start/cluster-app-outside-2.png)

配置完成后，可以在服务创建后通过下图中 **1** 处域名从集群外访问服务

![](_figures/quick-start/cluster-app-outside-3.png)

### TCP四层负载均衡    
    
选择左侧菜单栏「负载均衡」，切换负载均衡类型为「TCP」，点击「添加负载均衡」，开始创建一个四层负载均衡。

![](_figures/quick-start/cluster-app-balance4-1.png) 
   
在创建页中填入需要的信息：    
1）**负载均衡名称：**长度为2-64的小写字母、数字或"-", 不能以"-"开头或结尾    
2）**描述：**负载均衡的文本描述    
3）**IP类型：**选择负载均衡配置服务的访问方式  
      
?> **内网：**支持集群内跨namespace访问  
   **电信：**支持集群外部访问  
     
4）**计费方式：**带宽    
5）**带宽限制：**限制负载均衡最大带宽    
6）**后端服务：**下拉选择该负载均衡挂载到的服务  
7）**转发规则：**配置负载均衡的「监听端口」到服务的「后端端口」    

点击「创建」，完成四层负载均衡的创建。    
![](_figures/quick-start/cluster-app-balance4-2.png)

