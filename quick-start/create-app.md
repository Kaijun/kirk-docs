# 2.1 基于镜像创建应用 {docsify-ignore-all}

[1. 选择空间](#jump1)    
[2. 添加应用](#jump2)    
[3. 添加服务](#jump3) 
   
- [添加无状态服务](#jump31)    
- [添加有状态服务](#jump32)

[4. 完成创建](#jump4)

## <span id="jump1">1. 选择空间</span>

选择创建应用到某个空间下，应用资源只隶属于该空间。**操作如下：**    
下拉控制台顶部的「空间」进行空间切换    

![下拉选择空间](_figures/quick-start/create-app-namespace.png)

***
## <span id="jump2">2. 添加应用</span>
应用是服务的上一层抽象，完成了对服务的聚类。**操作如下：**

1）点击控制台左边栏的「应用」，切换至应用页面    
 
2）点击「添加应用」    

![](_figures/quick-start/create-app-1.png)

3）选择应用的创建方式，选择「基于镜像创建」    

![](_figures/quick-start/create-app-3.png)

4）填写「应用名」    
 
!> **应用名：** 2-30位的小写字母、数字，开头为字母

5）点击「添加服务」 

![](_figures/quick-start/create-app-4.png)  

***
## <span id="jump3">3. 添加服务</span>

![](_figures/quick-start/create-app-5.png) 

服务分为「有状态服务」和「无状态服务」两种类型。

?> **有状态服务：**挂载存储卷的服务，需要持久化存储数据到外部磁盘，支持单副本。    
   **无状态服务：**可以配置为多副本，保证服务的高可用。

### <span id="jump31">3.1 添加无状态服务</span>

**1. 服务名**

!> **要求：**2-30位的小写字母、数字，开头为字母

**2. 服务类型：**选择「无状态」

**3. 镜像地址：**点击「选择镜像」，选择服务镜像，然后点击操作中的「部署」

?> **公有镜像：**七牛镜像中心平台所有被公开的镜像资源    
   **Docker官方镜像：**七牛官方认证的镜像，已由平台同步到七牛镜像仓库地址    
   **收藏夹：**您收藏的公开镜像    
   **我的镜像：**您创建的镜像，包含公开镜像和私有镜像   

![](_figures/quick-start/create-app-6.png) 

**4. 容器规格**：提供6种容器规格

?> **1U1G：**单个容器配1个CPU和1G内存资源  
   **1U2G：**单个容器配1个CPU和2G内存资源  
   **2U2G：**单个容器配2个CPU和2G内存资源  
   **2U4G：**单个容器配2个CPU和4G内存资源    
   **4U8G：**单个容器配4个CPU和8G内存资源    
   **8U16G：**单个容器配8个CPU和16G内存资源      

**5. 容器数量**：设置服务的容器副本数，多副本数可以保证服务的高可用。服务运行中时，也可以通过「服务伸缩」进行副本数的扩缩容。

**6. 网络配置**：配置服务在集群内和集群外的网络访问方式。

?> **容器端口：**服务在集群内的网络端口    
   **协议类型：**服务在集群内的网络访问协议

**如何配置集群内部访问？**    
集群内服务可以通过服务发现实现互访，格式为 **应用名-服务名:端口号**

**如何配置集群外部访问：**    
集群外部访问需要给服务添加「负载均衡」，[详见3.6](user-guide/loadbalance.md)

**7. 配置文件**：将配置集以配置文件的形式挂载到容器内部。实现容器内配置，平台上维护。

?> **挂载路径：**配置集挂载到容器内部的文件路径    
   **配置集名称：**选择需要挂载的配置集
      
**8. 环境变量**

> **加载方式**

?> **手动填写：**手动输入变量值  
   **配置中心：**选择配置中心的配置项作为变量值，[详见3.9](user-guide/configmap.md)

**9. 运行目录**：镜像内启动程序的路径

**10. 执行命令**：容器启动后执行的命令

### <span id="jump32">3.2 添加有状态服务</span>

**1. 服务名**

!> **要求：**2-30位的小写字母、数字，开头为字母

**2. 服务类型：**选择「有状态」

**3. 镜像地址：**点击「选择镜像」，选择服务镜像，然后点击操作中的「部署」

?> **公有镜像：**七牛镜像中心平台所有被公开的镜像资源    
   **Docker官方镜像：**七牛官方认证的镜像，已由平台同步到七牛镜像仓库地址    
   **收藏夹：**您收藏的公开镜像    
   **我的镜像：**您创建的镜像，包含公开镜像和私有镜像   

![](_figures/quick-start/create-app-6.png) 

**4. 容器规格**：提供6种容器规格

?> **1U1G：**单个容器配1个CPU和1G内存资源  
   **1U2G：**单个容器配1个CPU和2G内存资源  
   **2U2G：**单个容器配2个CPU和2G内存资源  
   **2U4G：**单个容器配2个CPU和4G内存资源    
   **4U8G：**单个容器配4个CPU和8G内存资源    
   **8U16G：**单个容器配8个CPU和16G内存资源      

**5. 容器数量**：有状态服务只能为单副本。

**6. 存储卷配置**：挂载「存储卷」到服务。

?> **存储名称：**下拉选择存储卷(也可以临时创建新的存储卷)    
   **读写方式：**读写和只读   
   **挂载路径：**存储卷挂载到容器内的文件路径       

**7. 网络配置**：配置服务在集群内和集群外的网络访问方式。

?> **容器端口：**服务在集群内的网络端口    
   **协议类型：**服务在集群内的网络访问协议

**如何配置集群内部访问？**    
集群内服务可以通过服务发现实现互访，格式为 **应用名-服务名:端口号**

**如何配置集群外部访问：**    
集群外部访问需要给服务添加「负载均衡」，[详见3.6](user-guide/loadbalance.md)

**8. 配置文件**：将配置集以配置文件的形式挂载到容器内部。实现容器内配置，平台上维护。

?> **挂载路径：**配置集挂载到容器内部的路径    
   **配置集名称：**选择需要挂载的配置集
      
**9. 环境变量**

> **加载方式**

?> **手动填写：**手动输入变量值  
   **配置中心：**选择配置中心的配置项作为变量值，[详见3.9](user-guide/configmap.md)

**10. 运行目录**：镜像内启动程序的路径

**10. 执行命令**：容器启动后执行的命令

***
## <span id="jump4">4. 完成创建</span>

完成应用所需的服务创建之后，点击「创建应用」。