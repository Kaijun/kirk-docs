# 2.1 创建一个应用 {docsify-ignore-all}

[1. 选择空间](#jump1)    
[2. 添加应用](#jump2)    
[3. 添加服务](#jump3) 
   
- [添加无状态服务](#jump31)    
- [添加有状态服务](#jump32)

[4. 完成创建](#jump4)
 

## <span id="jump1">1. 选择空间</span>
1）下拉控制台顶部的「空间」进行空间切换，当前空间下创建的应用资源只隶属于该空间。   
 
?> **个人私有空间** - 首次登录平台的用户，平台会要求用户初始化一个私有空间，该空间不允许添加其他成员

***
## <span id="jump2">2. 添加应用</span>
1）点击控制台左边栏的「应用」，切换至应用界面。   
 
2）点击「添加应用」    

![](_figures/quick-start/create-app-1.png)    

3）填写「应用名」    
 
!> **应用名：** 2 - 30位的小写字母、数字，开头为字母

![](_figures/quick-start/create-app-2.png)  

***
## <span id="jump3">3. 添加服务</span>

服务根据是否需要持久化保存数据，分为有状态服务和无状态服务。

- <span id="jump31">添加无状态服务</span>

**1. 服务名**

?> **要求：**长度为2-32, 可以是小写字母或数字, 首字符必须是小写字母

**2. 服务类型：**选择「无状态」
   
?> **无状态：**只支持本地存储临时数据。   
   **有状态：**通过挂载数据盘存储持久化数据，只支持单容器副本。选择有状态类型需要配置存储卷

**3. 镜像地址：**选择完镜像后显示

?> **镜像地址：**仓库地址/namespace/镜像名称:tag号

**4. 镜像仓库**：点击「选择镜像」后弹出

> **镜像类型**  

?> **公有镜像：**平台用户均可见  
   **私有镜像：**需要鉴权访问，一个命名空间下的私有镜像对该命名空间下的所有用户可见。

> **镜像信息**

?> **镜像：**namespace/镜像名称  
   **最新版本：**最新更新上传的版本号  
   **版本数：**创建至今累计上传版本数  
   **所选版本：**当前服务需要部署的镜像版本号(默认显示最新更新版本)  
   **操作：**部署镜像


![](_figures/user-guide/app-public-images.png)

**5. 容器规格**：提供四种规格

?> **1U1G：**单个容器配1个CPU和1G内存资源  
   **1U2G：**单个容器配1个CPU和2G内存资源  
   **2U2G：**单个容器配2个CPU和2G内存资源  
   **2U4G：**单个容器配2个CPU和4G内存资源

**6. 容器数量**：当前服务需要配置的容器实例数。服务上线后，可以通过「服务伸缩」进行容器实例数的扩缩容。

**7. 网络配置**：配置服务在集群内访问所需的网络协议类型和端口号，也可以为服务配置集群外访问所需的负载均衡。

> **内部访问和外部访问**

?> **内部访问：**服务之间如果有网络的访问需求，可以通过配置环境变量实现，格式为 **应用名-服务名:端口号**  
   **外部访问：**「开启负载均衡」，在当前负载均衡列表中选择一个负载均衡，或者新增一个新的负载均衡

> **容器端口**

?> **metadata自动配置：**如果该镜像在metadata中约束了端口号，镜像选择之后，自动填写端口号
　
> **协议类型**

?> **metadata自动配置：**如果该镜像在metadata中约束了协议类型，镜像选择之后，自动选择协议类型

**8. 环境变量**

> **加载方式**

?> **手动填写：**手动输入变量值  
   **配置中心 [详见3.8](user-guide/configmap.md)：**通过选择配置中心的配置项快捷定义变量值

**9. 运行目录**：镜像内启动程序的路径

**10. 执行命令**：容器启动后执行的命令

**11. 执行参数**：执行命令的参数，多个参数时用空格分隔

- <span id="jump32">添加有状态服务</span>

**1. 服务名**

?> **要求：**长度为2-32, 可以是小写字母或数字, 首字符必须是小写字母

**2. 服务类型：**选择「有状态」
   
?> **无状态：**只支持本地存储临时数据。   
   **有状态：**通过挂载数据盘存储持久化数据，只支持单容器副本。选择有状态类型需要配置存储卷

**3. 镜像地址：**选择完镜像后显示

?> **镜像地址：**仓库地址/namespace/镜像名称:tag号

**4. 镜像仓库**：点击「选择镜像」后弹出

> **镜像类型**  

?> **公有镜像：**平台用户均可见  
   **私有镜像：**需要鉴权访问，一个命名空间下的私有镜像对该命名空间下的所有用户可见。

> **镜像信息**

?> **镜像：**namespace/镜像名称  
   **最新版本：**最新更新上传的版本号  
   **版本数：**创建至今累计上传版本数  
   **所选版本：**当前服务需要部署的镜像版本号(默认显示最新更新版本)  
   **操作：**部署镜像


![](_figures/user-guide/app-public-images.png)

**5. 容器规格**：提供四种规格

?> **1U1G：**单个容器配1个CPU和1G内存资源  
   **1U2G：**单个容器配1个CPU和2G内存资源  
   **2U2G：**单个容器配2个CPU和2G内存资源  
   **2U4G：**单个容器配2个CPU和4G内存资源

**6. 容器数量**：当前服务需要配置的容器实例数。服务上线后，可以通过「服务伸缩」进行容器实例数的扩缩容。

**7. 网络配置**：配置服务在集群内访问所需的网络协议类型和端口号，也可以为服务配置集群外访问所需的负载均衡。

> **内部访问和外部访问**

?> **内部访问：**服务之间如果有网络的访问需求，可以通过配置环境变量实现，格式为 **应用名-服务名:端口号**  
   **外部访问：**「开启负载均衡」，在当前负载均衡列表中选择一个负载均衡，或者新增一个新的负载均衡
> **容器端口**

?> **metadata自动配置：**如果该镜像在metadata中约束了端口号，镜像选择之后，自动填写端口号
　
> **协议类型**

?> **metadata自动配置：**如果该镜像在metadata中约束了协议类型，镜像选择之后，自动选择协议类型

**8. 存储卷配置**：服务类型为有状态时才需要配置

> **存储卷类型**

?> **云盘：**使用ceph块存储方案，具备高可靠性和可用性的特色。
　
> **读写方式**

?> **读写：**允许该服务对挂载盘进行读和写两种操作  
   **只读：**只允许该服务对挂载盘进行读操作

> **选择存储卷：**下拉选择「存储列表」内的存储卷进行服务挂载  

　
> **新增存储卷：**如果下拉列表内没有目标挂载卷，可以立即新增一个

?> **名称要求：**长度为2-32, 可以是小写字母或数字, 首字符必须是小写字母  
   **大小：**最小为1G，最大为1024G，调整粒度为1G

!> **注意：存储卷一旦创建成功，名称、大小无法修改**

![](_figures/user-guide/app-storage.jpeg)

**9. 环境变量**

> **加载方式**

?> **手动填写：**手动输入变量值  
   **配置中心 [详见3.8](user-guide/configmap.md)：**通过选择配置中心的配置项快捷定义变量值

**10. 运行目录**：镜像内启动程序的路径

**11. 执行命令**：容器启动后执行的命令

**12. 执行参数**：执行命令的参数，多个参数时用空格分隔

***
## <span id="jump4">4. 完成创建</span>

完成应用所需的服务创建之后，点击「创建应用」。